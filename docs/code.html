<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="../style/atoms.css" rel="stylesheet" />
    <script src="../jquery-1.8.2.min.js"></script>
    <script src="../atoms.min.js"></script>
    <link href="scripts/codemirror-4.2/lib/codemirror.css" rel="stylesheet" />
    <script src="scripts/codemirror-4.2/lib/codemirror.js"></script>


    <script src="scripts/codemirror-4.2/mode/xml/xml.js"></script>
    <script src="scripts/codemirror-4.2/mode/javascript/javascript.js"></script>
    <script src="scripts/codemirror-4.2/mode/css/css.js"></script>

    <script src="scripts/atom-code-view.js"></script>
    <link href="style/code-mirror.css" rel="stylesheet" />
    <meta http-equiv="Access-Control-Allow-Origin" content="*"> 


    <script type="text/javascript">

        function saveCode(p) {

            var code = p.value();

            var t = "<!-- sample -->";

            var index = code.indexOf(t);
            if (index == -1)
                return;

            code = code.substr(index + t.length);

            code = $.trim(code);

            index = code.lastIndexOf("<!-- end-sample -->");

            code = code.substr(0, index);

            code = $.trim(code);

            p.value(code);

        }

    </script>

</head>
<body>

    <div atom-type="AtomApplication">

        <script type="text/javascript">
            ({
                codeFile: ''
            })
        </script>

        <div 
            atom-dock="Fill"
            atom-type="AtomCodeView"
            atom-code="[AtomPromise.get($scope.codeFile).then(saveCode)]"
            >
        </div>

        <div
            class="code-execute-link"
            >
            <a
                atom-href="{$scope.codeFile}"
                target="_blank"
                >
                Execute
            </a>
        </div>

    </div>

</body>
</html>
